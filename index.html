<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PWA Vercel</title>

  <!-- Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- Theme -->
  <meta name="theme-color" content="#0f172a">

  <style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    color: #e5e7eb;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    overflow-x: hidden;
  }

  .container {
    text-align: center;
    max-width: 600px;
    z-index: 1;
  }

  .hero-icon {
    width: 120px;
    height: 120px;
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    border-radius: 28px;
    margin: 0 auto 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 60px;
    box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3);
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }

  h1 {
    font-size: 48px;
    font-weight: 700;
    background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 16px;
  }

  .subtitle {
    font-size: 20px;
    color: #94a3b8;
    margin-bottom: 40px;
  }

  .features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    margin-top: 40px;
  }

  .feature {
    background: rgba(30, 41, 59, 0.5);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(148, 163, 184, 0.1);
    border-radius: 16px;
    padding: 24px;
    transition: all 0.3s ease;
  }

  .feature:hover {
    transform: translateY(-5px);
    border-color: rgba(96, 165, 250, 0.3);
    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
  }

  .feature-icon {
    font-size: 32px;
    margin-bottom: 12px;
  }

  .feature-text {
    font-size: 14px;
    color: #cbd5e1;
  }

  /* ‚≠ê Modern PWA Pop-up Overlay */
  #pwa-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    z-index: 9998;
    display: none;
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* ‚≠ê Modern PWA Card */
  #pwa-card {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    display: none;
    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes slideUp {
    from { 
      transform: translateY(100%);
      opacity: 0;
    }
    to { 
      transform: translateY(0);
      opacity: 1;
    }
  }

  .pwa-card-inner {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-top-left-radius: 32px;
    border-top-right-radius: 32px;
    padding: 32px 24px;
    box-shadow: 0 -10px 50px rgba(0, 0, 0, 0.5);
    border-top: 1px solid rgba(148, 163, 184, 0.2);
  }

  .pwa-header {
    display: flex;
    gap: 16px;
    margin-bottom: 24px;
  }

  .pwa-app-icon {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    flex-shrink: 0;
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
  }

  .pwa-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .pwa-title {
    font-size: 20px;
    font-weight: 700;
    color: #f9fafb;
    margin-bottom: 4px;
  }

  .pwa-subtitle {
    font-size: 14px;
    color: #94a3b8;
  }

  .pwa-benefits {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 24px;
  }

  .benefit-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    color: #cbd5e1;
  }

  .benefit-icon {
    width: 24px;
    height: 24px;
    background: rgba(34, 197, 94, 0.2);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .pwa-actions {
    display: flex;
    gap: 12px;
  }

  .pwa-actions button {
    flex: 1;
    border-radius: 16px;
    border: none;
    padding: 16px 24px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  #pwa-install {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: #fff;
    box-shadow: 0 4px 16px rgba(34, 197, 94, 0.3);
  }

  #pwa-install:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
  }

  #pwa-install:active {
    transform: translateY(0);
  }

  #pwa-dismiss {
    background: rgba(30, 41, 59, 0.8);
    color: #cbd5e1;
    border: 1px solid rgba(148, 163, 184, 0.2);
  }

  #pwa-dismiss:hover {
    background: rgba(30, 41, 59, 1);
    border-color: rgba(148, 163, 184, 0.3);
  }

  /* Responsive */
  @media (min-width: 640px) {
    #pwa-card {
      bottom: 24px;
      left: 50%;
      right: auto;
      transform: translateX(-50%);
      width: 480px;
      max-width: 90%;
    }

    .pwa-card-inner {
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.2);
    }

    @keyframes slideUp {
      from { 
        transform: translate(-50%, 40px);
        opacity: 0;
      }
      to { 
        transform: translate(-50%, 0);
        opacity: 1;
      }
    }
  }

  @media (max-width: 640px) {
    h1 { font-size: 36px; }
    .subtitle { font-size: 18px; }
    .hero-icon { width: 100px; height: 100px; font-size: 50px; }
  }
  </style>
</head>

<body>

  <div class="container">
    <div class="hero-icon">üöÄ</div>
    <h1>PWA Modern</h1>
    <p class="subtitle">Aplikasi web progresif dengan mode offline</p>

    <div class="features">
      <div class="feature">
        <div class="feature-icon">‚ö°</div>
        <div class="feature-text">Super Cepat</div>
      </div>
      <div class="feature">
        <div class="feature-icon">üì±</div>
        <div class="feature-text">Seperti Native</div>
      </div>
      <div class="feature">
        <div class="feature-icon">üîí</div>
        <div class="feature-text">Aman & Offline</div>
      </div>
    </div>
  </div>

  <!-- ‚≠ê Overlay -->
  <div id="pwa-overlay"></div>

  <!-- ‚≠ê Modern Install Card -->
  <div id="pwa-card">
    <div class="pwa-card-inner">
      <div class="pwa-header">
        <div class="pwa-app-icon">üöÄ</div>
        <div class="pwa-info">
          <div class="pwa-title">Install Aplikasi</div>
          <div class="pwa-subtitle">PWA Modern App</div>
        </div>
      </div>

      <div class="pwa-benefits">
        <div class="benefit-item">
          <div class="benefit-icon">‚úì</div>
          <span>Akses instan dari home screen</span>
        </div>
        <div class="benefit-item">
          <div class="benefit-icon">‚úì</div>
          <span>Bekerja offline dengan cepat</span>
        </div>
        <div class="benefit-item">
          <div class="benefit-icon">‚úì</div>
          <span>Update otomatis di background</span>
        </div>
      </div>

      <div class="pwa-actions">
        <button id="pwa-install">Install Sekarang</button>
        <button id="pwa-dismiss">Nanti Saja</button>
      </div>
    </div>
  </div>

  <script>
  let deferredPrompt;

  // Jangan tampilkan banner bila sudah ter-install
  if (window.matchMedia("(display-mode: standalone)").matches) {
    localStorage.setItem("pwa_dismissed", "1");
  }

  function showPWAPrompt() {
    const overlay = document.getElementById("pwa-overlay");
    const card = document.getElementById("pwa-card");
    
    overlay.style.display = "block";
    card.style.display = "block";
    
    // Prevent body scroll
    document.body.style.overflow = "hidden";
  }

  function hidePWAPrompt() {
    const overlay = document.getElementById("pwa-overlay");
    const card = document.getElementById("pwa-card");
    
    overlay.style.display = "none";
    card.style.display = "none";
    
    // Restore body scroll
    document.body.style.overflow = "";
  }

  window.addEventListener("beforeinstallprompt", (e) => {
    console.log("üî• beforeinstallprompt fired");
    e.preventDefault();
    deferredPrompt = e;

    // jika user pernah klik "Nanti", jangan muncul lagi
    if (localStorage.getItem("pwa_dismissed")) return;

    // Delay untuk smooth experience
    setTimeout(() => {
      showPWAPrompt();
    }, 1000);

    // Close on overlay click
    document.getElementById("pwa-overlay").onclick = () => {
      hidePWAPrompt();
      localStorage.setItem("pwa_dismissed", "1");
    };

    document.getElementById("pwa-install").onclick = async () => {
      hidePWAPrompt();

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;

      console.log("Install result:", outcome);
      deferredPrompt = null;
    };

    document.getElementById("pwa-dismiss").onclick = () => {
      hidePWAPrompt();
      localStorage.setItem("pwa_dismissed", "1");
    };
  });

  // Register Service Worker
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("/service-worker.js")
        .then(() => console.log("‚úÖ SW registered"))
        .catch(err => console.log("‚ùå SW failed:", err));
    });
  }
  </script>

</body>
</html>
